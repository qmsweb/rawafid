<style>
  :root {
    --primary-color: #1a2ac6; /* اللون الأزرق للوضع الفاتح */
    --nav-height: 70px;
    --icon-size: 24px;
    --btn-size: 42px;
  }

  /* === إعدادات الوضع الداكن === */
  /* تم تغيير اللون هنا إلى #7986cb كما طلبت */
  [data-theme="dark"] {
    --primary-color: #7986cb; 
  }

  body {
    padding-top: var(--nav-height);
  }

  /* === إعدادات النافبار === */
  .navbar {
    background-color: var(--primary-color);
    color: #fff;
    height: var(--nav-height);
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    right: 0;
    left: 0;
    z-index: 1000;
    width: 100%;
    box-sizing: border-box;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    font-family: 'Poppins', sans-serif;
    transition: background-color 0.3s ease;
  }

  /* === الشعار === */
  .logo {
    display: flex;
    align-items: center;
    height: 100%;
  }

  .logo img {
    height: 40px;
    width: auto;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
   
  .logo img.loaded { opacity: 1; }

  /* === الروابط === */
  .nav-links {
    display: flex;
    gap: 1.5rem;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .nav-links a {
    text-decoration: none;
    color: white;
    font-size: 1rem;
    transition: color 0.3s ease;
    padding: 0.5rem;
    font-family: "IBM Plex Sans Arabic", sans-serif;
    position: relative;
  }

  .nav-links a:hover { color: #ffcc00; }

  /* === أزرار التحكم والأيقونات === */
  .nav-icons {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .icon-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    color: white;
    width: var(--btn-size);
    height: var(--btn-size);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s, transform 0.2s;
    position: relative;
    padding: 0;
  }

  .icon-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .icon-btn:active {
    transform: scale(0.95);
  }

  .icon-btn svg {
    width: var(--icon-size);
    height: var(--icon-size);
    fill: none;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: all 0.3s ease;
  }

  /* --- منطق تبديل أيقونة الثيم --- */
  .theme-toggle-btn .sun-icon { display: none; }
  .theme-toggle-btn .moon-icon { display: block; }

  [data-theme="dark"] .theme-toggle-btn .sun-icon { display: block; }
  [data-theme="dark"] .theme-toggle-btn .moon-icon { display: none; }
   
  [data-theme="dark"] .theme-toggle-btn:hover svg {
      color: #ffcc00;
      transform: rotate(20deg);
  }

  /* --- زر القائمة (Menu Toggle) --- */
  .menu-toggle-btn { display: none; }
   
  .menu-toggle-btn .close-icon { 
    display: none; 
    position: absolute;
  }
   
  .menu-toggle-btn.open .menu-icon { opacity: 0; transform: rotate(90deg) scale(0); }
  .menu-toggle-btn.open .close-icon { display: block; opacity: 1; transform: rotate(90deg) scale(1); }


  /* === تصميم الجوال === */
  @media (max-width: 768px) {
    .menu-toggle-btn { display: flex; }

    .nav-links {
      position: fixed;
      top: var(--nav-height);
      right: 0;
      width: 75%;
      max-width: 300px;
      height: calc(100vh - var(--nav-height));
      background-color: var(--primary-color);
      
      flex-direction: column;
      align-items: flex-start;
      padding: 2rem 1.5rem;
      
      transform: translateX(100%); 
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      
      box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
      z-index: 999;
      backdrop-filter: blur(10px); 
    }

    .nav-links.active {
      transform: translateX(0);
    }

    .nav-links li { width: 100%; margin-bottom: 10px; opacity: 0; transform: translateX(20px); transition: all 0.3s ease; }
    
    .nav-links.active li { opacity: 1; transform: translateX(0); }
    .nav-links.active li:nth-child(1) { transition-delay: 0.1s; }
    .nav-links.active li:nth-child(2) { transition-delay: 0.2s; }
    .nav-links.active li:nth-child(3) { transition-delay: 0.3s; }
    .nav-links.active li:nth-child(4) { transition-delay: 0.4s; }

    .nav-links a {
      display: block;
      width: 100%;
      font-size: 1.1rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding: 1rem 0;
    }
    
    .overlay {
        position: fixed;
        top: var(--nav-height);
        left: 0;
        width: 100%;
        height: 100vh;
        background: rgba(0,0,0,0.5);
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
        z-index: 998;
    }
    .overlay.active { opacity: 1; visibility: visible; }
  }
</style>

<header>
  <nav class="navbar">
    <a href="https://rawafid.jassim.one" class="logo">
      <img 
        id="cached-logo"
        src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" 
        data-url="https://github.com/qmsweb/rawafid/raw/main/images/rawafid-ramadan.png" 
        alt="شعار روافد" 
      />
    </a>
    
    <div class="overlay" id="nav-overlay"></div>

    <ul class="nav-links" id="nav-links">
      <li><a href="/">الرئيسية</a></li>
      <li><a href="/about">عن روافد</a></li>
      <li><a href="/tools">الأدوات</a></li>
      <li><a href="/contact">تواصل معنا</a></li>
    </ul>

    <div class="nav-icons">
      <button class="icon-btn theme-toggle-btn" id="theme-toggle-btn" aria-label="تغيير الوضع">
        <svg class="moon-icon" viewBox="0 0 24 24">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
        <svg class="sun-icon" viewBox="0 0 24 24">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>

      <button class="icon-btn menu-toggle-btn" id="menu-toggle" aria-label="القائمة">
        <svg class="menu-icon" viewBox="0 0 24 24">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
        <svg class="close-icon" viewBox="0 0 24 24">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
  </nav>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    
    /* === 1. كاش اللوجو === */
    const logoImg = document.getElementById('cached-logo');
    const targetUrl = logoImg.getAttribute('data-url');
    const CACHE_KEY_DATA = 'rawafid_logo_data';
    const CACHE_KEY_URL = 'rawafid_logo_url';
    const cachedData = localStorage.getItem(CACHE_KEY_DATA);
    const cachedUrl = localStorage.getItem(CACHE_KEY_URL);

    function displayLogo(src) {
        logoImg.src = src;
        logoImg.onload = () => logoImg.classList.add('loaded');
    }

    if (cachedData && cachedUrl === targetUrl) {
        displayLogo(cachedData);
    } else {
        displayLogo(targetUrl);
        fetch(targetUrl)
            .then(response => response.blob())
            .then(blob => {
                const reader = new FileReader();
                reader.onloadend = function() {
                    try {
                        localStorage.setItem(CACHE_KEY_DATA, reader.result);
                        localStorage.setItem(CACHE_KEY_URL, targetUrl);
                    } catch (e) {}
                }
                reader.readAsDataURL(blob);
            })
            .catch(err => console.error(err));
    }

    /* === 2. منطق القائمة المنسدلة === */
    const menuToggle = document.getElementById('menu-toggle');
    const navLinks = document.getElementById('nav-links');
    const overlay = document.getElementById('nav-overlay');

    function toggleMenu() {
      const isOpened = navLinks.classList.toggle('active');
      menuToggle.classList.toggle('open');
      overlay.classList.toggle('active');
      
      document.body.style.overflow = isOpened ? 'hidden' : '';
    }

    if (menuToggle) {
      menuToggle.addEventListener('click', toggleMenu);
      overlay.addEventListener('click', toggleMenu);
    }

    /* === 3. منطق زر تغيير الوضع === */
    const themeBtn = document.getElementById('theme-toggle-btn');
    
    themeBtn.addEventListener('click', function() {
      if (typeof toggleTheme === 'function') {
        toggleTheme();
      } else {
        // Fallback: تبديل يدوي للكلاس للتجربة
        const html = document.documentElement;
        if (html.getAttribute('data-theme') === 'dark') {
            html.removeAttribute('data-theme');
        } else {
            html.setAttribute('data-theme', 'dark');
        }
      }
    });
  });
</script>
